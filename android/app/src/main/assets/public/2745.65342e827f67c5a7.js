"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2745],{42745:(b,f,i)=>{i.r(f),i.d(f,{PasswordRecoveryCodePage:()=>P});var l=i(10467),e=i(54438),g=i(60177),h=i(11864),a=i(89417),y=i(61494),d=i(35933),_=i(16817),c=i(13903),p=i(60248);let P=(()=>{var u;class v{constructor(){this.route=(0,e.WQX)(_.nX),this.router=(0,e.WQX)(_.Ix),this.dataService=(0,e.WQX)(h.u),this.translate=(0,e.WQX)(c.c$),this.fb=(0,e.WQX)(a.ok),this.commonService=(0,e.WQX)(p.hf),this.authService=(0,e.WQX)(p.uR),this.navController=(0,e.WQX)(y.q9),this.userCreate=this.dataService.datosCompartidos,this.otpFormGroup=this.fb.group({field1:["",[a.k0.required]],field2:["",[a.k0.required]],field3:["",[a.k0.required]],field4:["",[a.k0.required]]})}get field1(){var t;return null===(t=this.otpFormGroup.get("field1"))||void 0===t?void 0:t.value}get field2(){var t;return null===(t=this.otpFormGroup.get("field2"))||void 0===t?void 0:t.value}get field3(){var t;return null===(t=this.otpFormGroup.get("field3"))||void 0===t?void 0:t.value}get field4(){var t;return null===(t=this.otpFormGroup.get("field4"))||void 0===t?void 0:t.value}ngOnInit(){return(0,l.A)(function*(){})()}gotoNextField(t){return(0,l.A)(function*(){t instanceof d.$w?yield t.setFocus():t instanceof d.Jm&&t.el.focus()})()}goTo(t){var r=this;return(0,l.A)(function*(){yield r.router.navigate([t])})()}getOtpInputed(){return this.field1.toString()+this.field2.toString()+this.field3.toString()+this.field4.toString()}veryfyOtp(){var t=this;return(0,l.A)(function*(){if(t.otpFormGroup.valid){let r=t.getOtpInputed();yield t.commonService.showLoader();try{const o=localStorage.getItem("resetpass-email");t.authService.verifyEmail(o,r).then(n=>{t.commonService.hideLoader(),n&&(console.log(n.status),t.navController.navigateForward("password-new"))}).catch(n=>{var s;console.log(null==n||null===(s=n.error)||void 0===s?void 0:s.message),t.navController.navigateForward("password-new"),t.commonService.hideLoader()}).finally(()=>t.commonService.hideLoader())}catch(o){console.log(o),yield t.navController.navigateForward("password-new")}}})()}createUser(){var t=this;return(0,l.A)(function*(){yield t.commonService.showLoader(),t.authService.register(t.userCreate).then(function(){var r=(0,l.A)(function*(o){var n;"success"===(null==o?void 0:o.status)&&(localStorage.setItem("jwt_token",null==o||null===(n=o.data)||void 0===n?void 0:n.token),yield t.commonService.hideLoader(),yield t.navController.navigateRoot("/greets"))});return function(o){return r.apply(this,arguments)}}()).catch(function(){var r=(0,l.A)(function*(o){if(yield t.commonService.hideLoader(),422===(null==o?void 0:o.status)){const n=t.translate.instant("register.error.email_taken");yield t.commonService.presentNotification(n,"","danger")}});return function(o){return r.apply(this,arguments)}}()).finally((0,l.A)(function*(){yield t.commonService.hideLoader()}))})()}}return(u=v).\u0275fac=function(t){return new(t||u)},u.\u0275cmp=e.VBU({type:u,selectors:[["app-password-recovery-code"]],standalone:!0,features:[e.aNF],decls:34,vars:16,consts:[["field1",""],["field2",""],["field3",""],["field4",""],["field5",""],[1,"ion-no-border"],[1,"my-bg","ion-no-margin","ion-no-padding"],[1,"m-2"],[1,"flex","flex-col","items-start","justify-between","pb-3",2,"width","100%","min-height","135px","background","var(--ion-color-primary)","border-radius","10px"],["src","assets/images/general/back.svg","alt","back","width","31",1,"self-start","m-3",3,"click"],[1,"H2-22-700","self-start","mx-3","leading-9","mb-2","my-text-header-secondary"],[1,"H6-14-400-SpaceGrotesk","mx-3","text-start","my-text-yellow"],[3,"fullscreen"],[1,"d-flex","w-100","flex-column","justify-content-between","h-100"],[1,"d-flex","flex-column","p-3"],[1,"H6-14-400SpaceGrotesk","my-text-dark"],[3,"ngSubmit","formGroup"],[1,"mx-auto","gap-5","mb-4","flex","justify-between","w-72"],["clearOnEdit","true","enterkeyhint","next","formControlName","field1",1,"text-center","input","ion-no-margin","ion-no-padding",2,"background","#f3f6f5","width","66px","height","55px",3,"ionInput","autofocus"],["clearOnEdit","true","enterkeyhint","next","formControlName","field2",1,"text-center","input","ion-no-margin","ion-no-padding",2,"background","#f3f6f5","width","66px","height","55px",3,"ionInput"],["clearOnEdit","true","enterkeyhint","next","formControlName","field3",1,"text-center","input","ion-no-margin","ion-no-padding",2,"background","#f3f6f5","width","66px","height","55px",3,"ionInput"],["clearOnEdit","true","enterkeyhint","next","formControlName","field4",1,"text-center","input","ion-no-margin","ion-no-padding",2,"background","#f3f6f5","width","66px","height","55px",3,"ionInput"],[1,"p-3","mt-64","text-center"],["type","submit",1,"my-btn-login","mx-auto",3,"disabled"]],template:function(t,r){if(1&t){const o=e.RV6();e.j41(0,"ion-header",5)(1,"ion-toolbar",6)(2,"div",7)(3,"div",8)(4,"img",9),e.bIt("click",function(){return e.eBV(o),e.Njj(r.goTo("login"))}),e.k0s(),e.j41(5,"ion-text",10),e.EFF(6),e.nI1(7,"translate"),e.k0s(),e.j41(8,"ion-text",11),e.EFF(9),e.nI1(10,"translate"),e.k0s()()()()(),e.j41(11,"ion-content",12)(12,"div",13)(13,"div",14)(14,"ion-text",15),e.EFF(15),e.nI1(16,"translate"),e.k0s()(),e.j41(17,"form",16),e.bIt("ngSubmit",function(){return e.eBV(o),e.Njj(r.createUser())}),e.j41(18,"div",17)(19,"ion-input",18,0),e.bIt("ionInput",function(){e.eBV(o);const s=e.sdS(22);return e.Njj(r.gotoNextField(s))}),e.k0s(),e.j41(21,"ion-input",19,1),e.bIt("ionInput",function(){e.eBV(o);const s=e.sdS(24);return e.Njj(r.gotoNextField(s))}),e.k0s(),e.j41(23,"ion-input",20,2),e.bIt("ionInput",function(){e.eBV(o);const s=e.sdS(26);return e.Njj(r.gotoNextField(s))}),e.k0s(),e.j41(25,"ion-input",21,3),e.bIt("ionInput",function(){e.eBV(o);const s=e.sdS(30);return e.Njj(r.gotoNextField(s))}),e.k0s()(),e.nrm(27,"br"),e.j41(28,"div",22)(29,"button",23,4)(31,"ion-text"),e.EFF(32),e.nI1(33,"translate"),e.k0s()()()()()()}if(2&t){const o=e.sdS(20);e.R7$(6),e.SpI(" ",e.bMT(7,8,"recovery_pass.label.verify_email")," "),e.R7$(3),e.SpI(" ",e.bMT(10,10,"recovery_pass.label.sub_title2")," "),e.R7$(2),e.Y8G("fullscreen",!0),e.R7$(4),e.JRh(e.bMT(16,12,"recovery_pass.label.sub_title3")),e.R7$(2),e.Y8G("formGroup",r.otpFormGroup),e.R7$(2),e.Y8G("autofocus",o),e.R7$(10),e.Y8G("disabled",r.otpFormGroup.invalid),e.R7$(3),e.JRh(e.bMT(33,14,"recovery_pass.btn.btn-verify"))}},dependencies:[d.bv,d.W9,d.eU,d.$w,d.IO,d.ai,d.Gw,g.MD,a.YN,a.qT,a.BC,a.cb,c.h,c.D9,a.X1,a.j4,a.JD]}),v})()}}]);