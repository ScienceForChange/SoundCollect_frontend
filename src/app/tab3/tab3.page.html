<ion-header class="ion-no-border">
  <ion-toolbar color="ligth" class="ion-no-margin ion-no-padding ion-no-border bg-white">
    <div class="flex items-center justify-center px-3">
      <ion-text class="H-24-700 my-text-header">
        Mi perfil
      </ion-text>
    </div>
  </ion-toolbar>
</ion-header>
<ion-content [fullscreen]="true">
  <div class="flex-col flex my-bg-profile" >
    <div class="p-3 flex flex-col w-full h-full">
      <ion-refresher slot="fixed" (ionRefresh)="handleRefresh($event)">
        <ion-refresher-content></ion-refresher-content>
      </ion-refresher>
      <section class="mb-4">
        <div class="flex justify-between w-full items-center mb-3">
          <ion-text class="H-20-700 my-text-header">{{'about_me.label.personal_inf'|translate}}</ion-text>
        </div>
        <div class="box-style">
           <label class="H-20-700 my-text-header" style="padding:0 24px;">
             Reinier Torres
<!--             {{patient? (patient?.name +" "+patient?.lastname) : "-"}}-->
           </label>
          <ion-text class="H-16-400 my-text-dark" style="padding:0 24px;">
            34 años
<!--            {{ ((Date.now() - (patient?.birthdate * 1000)) / (31557600000)) | number: '1.0-0' }} años-->
          </ion-text>
          <ion-text class="H-16-400 my-text-dark" style="padding:0 24px;">
            reinier.torres@qualud.com
<!--            {{patient?.email ?? "-"}}-->
          </ion-text >
          <div class="w-full py-3" style="padding: 24px 0;border-top:1.5px solid #F2F4F3 ">
            <button class="ms-3 flex items-center bg-transparent my-text-red H6-14-700SpaceGrotesk">
              <img src="assets/images/SoundCollect/Iconos/edit.svg"> Editar información personal
            </button>
          </div>

        </div>
      </section>
      <section class="mb-4">
        <div class="flex justify-between w-full items-center mb-3">
          <ion-text class="H-20-700 my-text-header">Mi contribución</ion-text>
        </div>
        <div class="box-style">
           <label class="H-20-700 my-text-header flex justify-between items-center w-full" style="padding:0 24px;">
             <span>Nivel X</span>
             <span class="flex"><img class="me-3" src="assets/images/SoundCollect/Ilustraciones/solar.svg"> Principiante</span>
           </label>
          <ion-text class="H6-14-400-SpaceGrotesk my-text-dark" style="padding:0 24px;">
            5 contribuciones para llegar al próximo nivel
          </ion-text>
          <div class="w-full flex justify-between" style="border-top:1.5px solid #F2F4F3 ">
            <div class="flex flex-col items-center gap-2 w-full py-6" style="border-right:1.5px solid #F2F4F3  ">
              <label class="H-24-700 my-text-header">25</label>
              <label class="H6-14-400-SpaceGrotesk my-text-header">Zonas de estudio</label>
            </div>
            <div class="flex flex-col items-center gap-2 w-full py-6">
              <label class="H-24-700 my-text-header">25</label>
              <label class="H6-14-400-SpaceGrotesk my-text-header">Sonidos registrados</label>
            </div>
          </div>
          <div class="w-full pt-2" style="border-top:1.5px solid #F2F4F3 ">
            <button class="mx-5 w-full flex items-center bg-transparent my-text-header H-16-400">
               <label class="flex justify-between w-full me-5"><span>Mis sonidos</span>  <span>5</span></label> <img class="me-8" src="assets/images/SoundCollect/Ilustraciones/arrow.svg">
            </button>
          </div>
          <div class="w-full pt-2" style="border-top:1.5px solid #F2F4F3 ">
            <button class="mx-5 w-full flex items-center bg-transparent my-text-header H-16-400">
              <label class="flex justify-between w-full me-5"><span>Zonas de estudio</span>  <span>5</span></label> <img class="me-8" src="assets/images/SoundCollect/Ilustraciones/arrow.svg">
            </button>
          </div>
          <div class="w-full pt-2" style="border-top:1.5px solid #F2F4F3 ">
            <button class="mx-5 w-full flex items-center bg-transparent my-text-header H-16-400">
              <label class="flex justify-between w-full me-5"><span>Insignias conseguidas</span>  <span>5</span></label> <img class="me-8" src="assets/images/SoundCollect/Ilustraciones/arrow.svg">
            </button>
          </div>
          <div class="w-full py-2" style="border-top:1.5px solid #F2F4F3 ">
            <button class="mx-5 w-full flex items-center bg-transparent my-text-header H-16-400">
              <label class="flex justify-between w-full me-5"><span>Descargar información</span>  <span></span></label> <img class="me-8" src="assets/images/SoundCollect/Iconos/download.svg">
            </button>
          </div>
        </div>
      </section>
      <section class="mb-4">
        <div class="flex justify-between w-full items-center mb-3">
          <ion-text class="H-20-700 my-text-header">Sobre mi cuenta</ion-text>
        </div>
        <div class="box-style">
         <div class="w-full pt-2">
            <button [routerLink]="['/user-guide']" class="mx-5 w-full flex items-center bg-transparent my-text-header H-16-400">
              <label class="flex justify-between w-full me-5"><span>Guía de usuario</span>  <span></span></label> <img class="me-8" src="assets/images/SoundCollect/Ilustraciones/arrow.svg">
            </button>
          </div>
          <div class="w-full pt-2" style="border-top:1.5px solid #F2F4F3 ">
            <button [routerLink]="['/change-language']" class="mx-5 w-full flex items-center bg-transparent my-text-header H-16-400">
              <label class="flex justify-between w-full me-5"><span>Idioma</span>  <span></span></label> <img class="me-8" src="assets/images/SoundCollect/Ilustraciones/arrow.svg">
            </button>
          </div>
          <div class="w-full pt-2" style="border-top:1.5px solid #F2F4F3 ">
            <button class="mx-5 w-full flex items-center bg-transparent my-text-header H-16-400">
              <label class="flex justify-between w-full me-5"><span>Términos y condiciones</span>  <span></span></label> <img class="me-8" src="assets/images/SoundCollect/Ilustraciones/arrow.svg">
            </button>
          </div>
          <div class="w-full pt-2" style="border-top:1.5px solid #F2F4F3 ">
            <button class="mx-5 w-full flex items-center bg-transparent my-text-header H-16-400">
              <label class="flex justify-between w-full me-5"><span>GDPR info</span>  <span></span></label> <img class="me-8" src="assets/images/SoundCollect/Ilustraciones/arrow.svg">
            </button>
          </div>
          <div class="w-full pt-2" style="border-top:1.5px solid #F2F4F3 ">
            <button class="mx-5 w-full mb-2 flex items-center bg-transparent my-text-header H-16-400">
              <label class="flex justify-between w-full me-5"><span>Información legal</span>  <span></span></label> <img class="me-8" src="assets/images/SoundCollect/Ilustraciones/arrow.svg">
            </button>
          </div>

        </div>
      </section>
      <section class="mb-4">
        <div class="flex justify-start w-full items-center">
          <ion-text class="H3-18-700 my-text-header"
          >{{'about_me.label.setting'|translate}}</ion-text
          >
        </div>
        <div  class="box-style"        >
          <button (click)="goToChangePassword()" class="mx-5 w-full flex items-center mb-2 bg-transparent my-text-header H-16-400">
            <label class="flex justify-between w-full me-5"><span>{{'login.label.password'|translate}}</span>  <span></span></label> <img class="me-8" src="assets/images/SoundCollect/Ilustraciones/arrow.svg">
          </button>
               <!-- <div
            class="flex ms-2 justify-between p-2"
            style="border-bottom: 1px solid #d3d3d3;"
          >
            <ion-text class="H6-14-700SpaceGrotesk my-text-dark"
              >{{'about_me.label.lang'|translate}}</ion-text
            >
            <button class="bg-transparent H6-14-400SpaceGrotesk my-text-red" (click)="editProfile('change-language')">
              {{patient?.locale === 'ES' ? 'Español' : 'Catalan'}}
            </button>
          </div>
          <button class="flex ms-2 justify-between p-2" style="display: none;">
            <ion-text class="H6-14-700SpaceGrotesk my-text-dark"
              >{{'about_me.label.notification'|translate}}</ion-text
            >
            <ion-icon size="medium" name="chevron-forward-outline"></ion-icon>
          </button> -->
        </div>
      </section>
      <section [hidden]="true" class="mb-4">
        <div class="flex justify-start w-full items-center">
          <ion-text class="H3-18-700 my-text-header"
          >{{'about_me.label.others'|translate}}</ion-text
          >
        </div>
        <div
                class="flex flex-col"
                style="
          background: #f3f6f5;
          border: 1px solid #f3f6f5;
          border-radius: 8px;
        "
        >
          <button
                  class="flex ms-2 justify-between p-2"
                  style="border-bottom: 1px solid #d3d3d3"
          >
            <ion-text class="H6-14-700SpaceGrotesk my-text-dark"
            >{{'about_me.label.report_error'|translate}}</ion-text
            >
            <ion-icon size="medium" name="chevron-forward-outline"></ion-icon>
          </button>
          <button
                  class="flex ms-2 justify-between p-2"
                  style="border-bottom: 1px solid #d3d3d3"
          >
            <ion-text class="H6-14-700SpaceGrotesk my-text-dark"
            >{{'about_me.label.terms'|translate}}</ion-text
            >
            <ion-icon size="medium" name="chevron-forward-outline"></ion-icon>
          </button>
          <button
                  class="flex ms-2 justify-between p-2"
                  style="border-bottom: 1px solid #d3d3d3"
          >
            <ion-text class="H6-14-700SpaceGrotesk my-text-dark"
            >{{'about_me.label.privacy'|translate}}</ion-text
            >
            <ion-icon size="medium" name="chevron-forward-outline"></ion-icon>
          </button>
          <div class="flex ms-2 justify-between p-2">
            <ion-text class="H6-14-700SpaceGrotesk my-text-dark"
            >{{'about_me.label.version'|translate}}</ion-text
            >
            <ion-text class="bg-transparent H6-14-400SpaceGrotesk my-text-dark"
            >0.1</ion-text
            >
          </div>
        </div>
      </section>
      <button class="my-btn-login mt-8 mx-auto"
              (click)="logout()"
      >
        Cerrar sesión
      </button>
      <div class="ion-padding ion-text-center">v{{appVersion}}</div>
      <br />
      <br />
      <br />
      <br />
    </div>
    <ion-modal
            #modal3
            trigger="open-modal3"
            (willPresent)="onWillPresent($event)"
            [initialBreakpoint]="0.95"
            class="about-me-modal"
    >
      <ng-template>
        <ion-header class="ion-no-border"> &nbsp; </ion-header>
        <ion-content>
          <ion-fab
                  slot="fixed"
                  vertical="bottom"
                  horizontal="end"
                  [edge]="false"
                  style="bottom: 55px"
          >
            <ion-fab-button (click)="modal3.dismiss()">
              <ion-icon name="chevron-down-circle"></ion-icon>
            </ion-fab-button>
          </ion-fab>
          <section class="mt-0">
            <div>
              <div
                      class="flex py-4 w-full flex-col px-5"
                      style="border-left: 1px solid rgba(217, 217, 217, 0.1)"
              >
                <div class="flex justify-between items-center">
                  <div class="flex flex-col">
                    <ion-text class="H2-22-700 my-text-dark"
                    >{{'tabs1.your_plan'|translate}}</ion-text
                    >
                    <ion-text class="H6-14-700SpaceGrotesk my-text-dark"
                    >{{today_programs_text}}</ion-text
                    >
                  </div>
                  <ion-text class="H1-30-700SpaceGrotesk my-text-dark">
                    {{percent}}
                    <span
                            class="my-text-dark"
                            style="font-size: 19px; font-weight: 700"
                    >%</span
                    >
                  </ion-text>
                </div>
                <ion-progress-bar
                        class="modal-progress"
                        [value]="finishedAct / counter"
                        style="width: 100%; height: 6px; border-radius: 26px"
                ></ion-progress-bar>
              </div>
              <div class="flex w-full flex-col px-5 pb-3 items-end">
                <ion-button
                        fill="outline"
                        size="small"
                        (click)="toogleActives('show')"
                >
                  Mostrar anteriores
                </ion-button>
              </div>
            </div>
          </section>

          <section
                  [class]="isSameDay(act.date) ? 'my-active-section' : 'my-next-section'"
                  *ngFor="let act of programs;let first = first"
          >
            <div class="header flex justify-between items-center px-3">
              <ion-text class="H6-14-700SpaceGrotesk my-text-dark"
              >{{act.date|formatEpoch}}</ion-text
              >
              <ion-text class="H6-14-400SpaceGrotesk my-text-dark"
              >(<span style="font-weight: 700">{{counterFinish(act)}}</span
              >/{{act.items.length}})
              </ion-text>
            </div>
            <div class="plan-wrapper">
              <div
                      [ngClass]="item.isFinished ? 'plan-done' : 'plan'"
                      class="m-3 p-3 flex justify-between items-center"
                      *ngFor="let item of act.items"
                      (click)="pickActivity(act, item)"
              >
                <div class="text-wrapper flex flex-col">
                  <ion-text class="H6-14-700SpaceGrotesk header-line"
                  >{{(item.activityTitle.length > 49) ?
                          item.activityTitle.slice(0, 37) + '...' : item.activityTitle
                    }}</ion-text
                  >
                  <ion-text
                          class="H6-14-400SpaceGrotesk my-text-dark"
                          *ngIf="item.activityType === 'test'"
                  >
                    Cuestionario
                  </ion-text>
                  <ion-text
                          class="H6-14-400SpaceGrotesk my-text-dark"
                          *ngIf="item.activityType === 'exercise'"
                  >
                    {{'home.label.text_exercices'|translate}}
                  </ion-text>
                </div>
                <div class="my-bg-exag-modald"></div>
              </div>
            </div>
          </section>
          <br />
          <br />
          <br />
        </ion-content>
      </ng-template>
    </ion-modal>
  </div>

</ion-content>
