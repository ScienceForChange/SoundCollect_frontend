<ion-header class="ion-no-border">
  <ion-toolbar
    color="secondary"
    class="ion-no-margin ion-no-padding ion-no-border"
  >
    <div class="flex items-center justify-between px-3">
      <img
        tappable="true"
        class="mt-1"
        (click)="goBack()"
        src="assets/images/SoundCollect/Iconos/back-white.svg"
        alt="back"
        width="24"
      />
      <ion-text class="H2-22-700 self-start text-white">
        {{'sounds.results.title'|translate}}
      </ion-text>
      <img
        tappable="true"
        class="mt-1"
        (click)="goExit()"
        ngSrc="assets/images/SoundCollect/Iconos/close_white.svg"
        alt="back"
        width="24"
        height="24"
      />
    </div>
  </ion-toolbar>
</ion-header>

<ion-content
  [fullscreen]="true"
  style="--background: var(--ion-color-secondary) !important"
>
  <div
    class="flex items-center gap-4 pt-6 flex-col justify-start w-full h-full"
  >
    <label class="H-20-700 text-white text-start w-full ms-8 mt-5"
      >{{'sounds.results.more_info'|translate}}</label
    >
    <div class="blue-box">
      <div class="w-100 flex flex-col">
        <div class="H-16-400 my-text-header flex">
          <label>
            {{'observations.questions.question1'|translate}}: <br /><strong
              *ngFor="let sound of observation.sound_types; let first = first;"
            >
              <span *ngIf="!first">, </span>
              <span
                >{{'observations.answers.Q1A'+sound |translate}}</span
              >
            </strong></label
          >
        </div>
      </div>
      <div class="w-100 flex flex-col mt-2">
        <div class="H-16-400 my-text-header flex">
          <label>
            {{'observations.questions.question2'|translate}}: <br /><strong
              >{{'observations.answers.Q2A'+observation.quiet|translate}}</strong
            ></label
          >
        </div>
      </div>
      <div class="w-100 flex flex-col my-2">
        <div class="H-16-400 my-text-header flex">
          <label>
            {{'observations.questions.question3'|translate}}: <br /><strong
              >{{'observations.answers.Q3A'+observation.cleanliness|translate}}</strong
            ></label
          >
        </div>
      </div>
      <div class="w-100 flex flex-col">
        <div class="H-16-400 my-text-header flex">
          <label>
            {{'observations.questions.question4'|translate}}: <br /><strong
              >{{'observations.answers.Q4A'+observation.accessibility|translate}}</strong
            ></label
          >
        </div>
      </div>
      <div class="w-100 flex flex-col">
        <div class="H-16-400 my-text-header flex">
          <label>
            {{'observations.questions.question5'|translate}}: <br /><strong
              >{{'observations.answers.Q5A'+observation.safety|translate}}</strong
            ></label
          >
        </div>
      </div>
      <div class="w-100 flex flex-col">
        <div class="H-16-400 my-text-header flex">
          <label>
            {{'observations.questions.question6'|translate}}: <br /><strong
              >{{'observations.answers.Q6A'+observation.influence|translate}}</strong
            ></label
          >
        </div>
      </div>
      <!-- <div class="w-100 flex flex-col">
        <div class="H-16-400 my-text-header flex">
          <label>
            {{'observations.questions.question7'|translate}}: <br /><strong
              >{{observation.landmark}}</strong
            ></label
          >
        </div>
      </div> -->
      <div class="w-100 flex flex-col">
        <div class="H-16-400 my-text-header flex">
          <label>
            {{'observations.questions.question8'|translate}}: <br /><strong
              >{{observation.protection}}</strong
            ></label
          >
        </div>
      </div>
      <div class="w-100 flex flex-col" *ngIf="isExpert">
        <div class="H-16-400 my-text-header flex">
          <label> {{'observations.questions.questionExp1'|translate}}: </label>
        </div>
        <div>
          <label>
            {{'observations.answers.questionExp1A1'|translate}}:
            <br /><strong>{{'observations.answers.QE1A'+observation.pleasant|translate}}</strong></label
          >
        </div>
        <div>
          <label>
            {{'observations.answers.questionExp1A2'|translate}}:
            <br /><strong>{{'observations.answers.QE1A'+observation.chaotic|translate}}</strong></label
          >
        </div>
        <div>
          <label>
            {{'observations.answers.questionExp1A3'|translate}}:
            <br /><strong>{{'observations.answers.QE1A'+observation.vibrant|translate}}</strong></label
          >
        </div>
        <div>
          <label>
            {{'observations.answers.questionExp1A4'|translate}}:
            <br /><strong>{{'observations.answers.QE1A'+observation.uneventful|translate}}</strong></label
          >
        </div>
        <div>
          <label>
            {{'observations.answers.questionExp1A5'|translate}}:
            <br /><strong>{{'observations.answers.QE1A'+observation.calm|translate}}</strong></label
          >
        </div>
        <div>
          <label>
            {{'observations.answers.questionExp1A6'|translate}}:
            <br /><strong>{{'observations.answers.QE1A'+observation.annoying|translate}}</strong></label
          >
        </div>
        <div>
          <label>
            {{'observations.answers.questionExp1A7'|translate}}:
            <br /><strong>{{'observations.answers.QE1A'+observation.eventful|translate}}</strong></label
          >
        </div>
        <div>
          <label>
            {{'observations.answers.questionExp1A8'|translate}}:
            <br /><strong>{{'observations.answers.QE1A'+observation.monotonous|translate}}</strong></label
          >
        </div>
      </div>
      <div class="w-100 flex flex-col" *ngIf="isExpert">
        <div class="H-16-400 my-text-header flex">
          <label>
            {{'observations.questions.questionExp3'|translate}}: <br /><strong
              >{{'observations.answers.questionExp3A'+observation.environment|translate}}</strong
            ></label
          >
        </div>
      </div>
    </div>
    <div *ngIf="fileList.length>0" class="flex flex-col">
      <label class="H-20-700 text-white text-start w-full mb-4 ms-2 mt-5"
        >{{'sounds.results.info_multimedia'|translate}}</label
      >
      <div class="blue-box">
        <!--      <label class="H-20-700 my-text-header">{{'sounds.collect.images'|translate}}</label>-->
        <div
          class="flex gap-2 justify-start items-center p-2"
          style="overflow: scroll"
        >
          <div *ngFor="let file of fileList,let i=index" class="img-box">
            <ion-img
              style="aspect-ratio: 109/128; object-fit: cover"
              [src]="getImgUrl(i)"
            ></ion-img>
          </div>
        </div>
      </div>
    </div>
    <div class="flex flex-row justify-between items-center w-full ms-8 mt-5 pe-4">
      <label class="H-20-700 text-white text-start"
        >{{'sounds.collect.details'|translate}}</label
      >
      <app-parameters-explanation buttonTextColor="light" [isExpert]="isExpert"></app-parameters-explanation>
    </div>
    <div class="blue-box">
      <div class="flex flex-col">
        <div class="H-16-400 my-text-header flex flex-col">
          <div class="w-full flex m-2">
            <img
              ngSrc="assets/images/SoundCollect/Iconos/ellipse.svg"
              height="16"
              width="16"
              alt=""
              class="me-1"
            />
            <strong>{{'sounds.collect.process.L10' |translate}}</strong>:
            {{observation.L10 | number:'1.0-0'}}
          </div>
          <div class="w-full flex m-2">
            <img
              ngSrc="assets/images/SoundCollect/Iconos/ellipse.svg"
              height="16"
              width="16"
              alt=""
              class="me-1"
            />
            <strong>{{'sounds.collect.process.L90' |translate}}</strong>:
            {{observation.L90 | number:'1.0-0'}}
          </div>
          <div class="w-full flex m-2">
            <img
              ngSrc="assets/images/SoundCollect/Iconos/ellipse.svg"
              height="16"
              width="16"
              alt=""
              class="me-1"
            />
            <strong>{{'sounds.collect.process.Leq' |translate}}</strong>:
            {{observation.Leq| number:'1.0-0'}}
          </div>
          <div class="w-full flex m-2">
            <img
              ngSrc="assets/images/SoundCollect/Iconos/ellipse.svg"
              height="16"
              width="16"
              alt=""
              class="me-1"
            />
            <strong>{{'sounds.collect.process.LAmax' |translate}}</strong>:
            {{observation.LAmax| number:'1.0-0'}}
          </div>
          <div class="w-full flex m-2">
            <img
              ngSrc="assets/images/SoundCollect/Iconos/ellipse.svg"
              height="16"
              width="16"
              alt=""
              class="me-1"
            />
            <strong>{{'sounds.collect.process.LAmin' |translate}}</strong>:
            {{observation.LAmin| number:'1.0-0'}}
          </div>

          <div class="w-100 flex justify-center flex-col">
            <div class="H-16-400 my-text-header flex items-center">
              <div class="w-full flex m-2">
                <img
                  ngSrc="assets/images/SoundCollect/Iconos/ellipse.svg"
                  height="16"
                  width="16"
                  alt=""
                  class="me-1"
                />
                <strong>{{'sounds.collect.process.LAeqT'|translate}}:</strong>
              </div>
            </div>
            <div class="w-80">
              <app-graph [dataset]="observation.LAeqT"></app-graph>
            </div>
          </div>

          <div *ngIf="isExpert" class="mt-3">
            <div *ngIf="observation.sharpness_S!=='N/A'" class="w-full flex m-2">
              <img
                ngSrc="assets/images/SoundCollect/Iconos/ellipse.svg"
                height="16"
                width="16"
                alt=""
                class="me-1"
              />
              <strong>{{'sounds.collect.process.sharpness_S' |translate}}</strong>:
              {{observation.sharpness_S}}
            </div>
            <div *ngIf="observation.loudness_N!=='N/A'" class="w-full flex m-2">
              <img
                ngSrc="assets/images/SoundCollect/Iconos/ellipse.svg"
                height="16"
                width="16"
                alt=""
                class="me-1"
              />
              <strong>{{'sounds.collect.process.loudness_N' |translate}}</strong>:
              {{observation.loudness_N}}
            </div>
            <div *ngIf="observation.fluctuation_strength_F!=='N/A'" class="w-full flex m-2">
              <img
                ngSrc="assets/images/SoundCollect/Iconos/ellipse.svg"
                height="16"
                width="16"
                alt=""
                class="me-1"
              />
              <strong
                >{{'sounds.collect.process.fluctuation_strength_F'
                |translate}}</strong
              >: {{observation.fluctuation_strength_F}}
            </div>
            <div *ngIf="observation.segments.length>0 && observation.segments[0].freq_3?.length>0" class="H-16-400 my-text-header flex items-center">
              <div class="w-full flex m-2">
                <img
                  ngSrc="assets/images/SoundCollect/Iconos/ellipse.svg"
                  height="16"
                  width="16"
                  alt=""
                  class="me-1"
                />
                <strong>{{'sounds.collect.process.spectral'|translate}}</strong>
              </div>
            </div>
            <div class="w-80">
              <app-spectral-graph [segments]="observation.segments"></app-spectral-graph>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div>&nbsp;</div>
  </div>
</ion-content>

<ion-footer
  class="ion-no-border"
  style="background-color: var(--ion-color-secondary)"
>
  <div class="ion-no-border px-3 pt-2">
    <div class="flex w-full flex-col justify-evenly gap-3">
      <button (click)="sendObservation()" class="my-btn-login-inverted mx-auto">
        <ion-text class="ion-text-nowrap">
          {{'sounds.btn.send'|translate}}
        </ion-text>
      </button>
    </div>
  </div>
</ion-footer>
